<!DOCTYPE html>
<html lang="en" class="no-js">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="mobile-web-app-capable" content="yes">
		<meta name="viewport" content="width=device-width, initial-scale=1.0,  minimum-scale=1.0"> 
		<title>Easy park</title>
		<link rel="apple-touch-icon" href="images/custom_icon.png"/>
		<link rel="stylesheet" type="text/css" href="css/style.css" />
		<link rel="stylesheet" type="text/css" href="css/component.css" />
		<link rel="stylesheet" href="http://code.jquery.com/ui/1.11.1/themes/smoothness/jquery-ui.css">
		<link rel="stylesheet" type="text/css" href="css/slides.css" />
		<script type="text/javascript"src="https://maps.googleapis.com/maps/api/js?sensor=true"></script>
		<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

		<link rel="stylesheet" type="text/css" href="css/addtohomescreen.css">
		<script src="js/addtohomescreen.js"></script>
		<script>
		addToHomescreen();
		</script>

		<link href="css/myBootstrap.css" rel="stylesheet" type="text/css">

	</head>
	<body>
		<div class="container">
			<ul id="gn-menu" class="gn-menu-main" role="tablist">
				<li class="gn-trigger">
					<a class="gn-icon gn-icon-menu"><span>Menu</span></a>
					<nav class="gn-menu-wrapper">
						<div class="gn-scroller">
							<ul class="gn-menu">
								<li>
									<a class="gn-icon gn-icon-download">Parking near me</a>
									<ul class="gn-submenu">
										<li><a class="gn-icon gn-icon-illustrator">Distance</a></li>
										<li><a class="gn-icon gn-icon-photoshop">Price</a></li>
										<li><a class="gn-icon gn-icon-photoshop">Rating</a></li>
									</ul>
								</li>
								<li>
									<a class="gn-icon gn-icon-archive">Parking info</a>
									<ul class="gn-submenu">
										<li><a class="gn-icon gn-icon-article">Park sweeping</a></li>
										<li><a class="gn-icon gn-icon-pictures">Hours</a></li>
										<li><a class="gn-icon gn-icon-videos">Street cleaning</a></li>
									</ul>
								</li>
								<li><a class="gn-icon gn-icon-cog">Settings</a></li>
								<li><a class="gn-icon gn-icon-help">Help</a></li>
							</ul>
						</div><!-- /gn-scroller -->
					</nav>
				</li>
				<li class="active"><a href="#home" role="tab" data-toggle="tab"><!-- <i class="fa fa-refresh fa-spin"></i> &nbsp; -->Search</a></li>
				<li><a href="#nav" role="tab" data-toggle="tab"><span>Find Car</span></a></li>
				<li><a href="../easyparkweb/archive/index.html"><span>Back to website</span></a></li>
			</ul><!-- /navigation -->

			

			<div class="main-content">


			<!-- Tab panes -->
			<div class="tab-content">


				<div class="tab-pane active" id="home">
					<h1>Bay East <span>Annimation test</span></h1>	
					<div id="inputfield">
						<input id="destination" type="text" placeholder="Enter destination name or address" /> <a id="findp" class="gn-icon gn-icon-download"></a>
					</div>
				</div>

				<div class="tab-pane" id="nav">
					<h1>Bay East Nav <span>Your address:<span id="address"></span></span></h1>
			
			
		   <b>End: </b>
		   <input onchange="calcRoute()"/>
    <!-- <select id="end" onchange="calcRoute();">
      <option value="">Select Destination</option>
      <option value="845 pine st, San Francisco, CA">Dimitri house</option>
      <option value="Hyatt rengency ,San Francisco, CA">Hyatt Rengency</option>
      <option value="soma, San Francisco, CA">SOMA</option>
    </select> -->

				    <p id="error"></p>

					<div id="map-canvas"></div>
				</div>

			 </div>







			

			</div><!-- /main-content -->
		

		</div><!-- /container -->
		<script src="js/jquery-1.11.1.min.js"></script>
		<script src="http://code.jquery.com/ui/1.11.1/jquery-ui.js"></script>
		<script src="js/modernizr.custom.js"></script>
		<script src="js/classie.js"></script>
		<script src="js/gnmenu.js"></script>

		<script src="js/myBootstrap.js"></script>


		<script>


		function writeAddressName(latLng) {
        var geocoder = new google.maps.Geocoder();
        geocoder.geocode({
          "location": latLng
        },
        function(results, status) {
          if (status == google.maps.GeocoderStatus.OK)
            document.getElementById("address").innerHTML = results[0].formatted_address;
          else
            document.getElementById("error").innerHTML += "Unable to retrieve your address" + "<br />";
        });
      }
 
      function geolocationSuccess(position) {
        var userLatLng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
        
        // Write the formatted address
        writeAddressName(userLatLng);

        return userLatLng; 
        alert(userLatLng);  
      }
 
      function geolocationError(positionError) {
        document.getElementById("error").innerHTML += "Error: " + positionError.message + "<br />";
      }
 
      function geolocateUser() {
        // If the browser supports the Geolocation API
        if (navigator.geolocation)
        {
          var positionOptions = {
            enableHighAccuracy: true,
            timeout: 10 * 1000 // 10 seconds
          };
          navigator.geolocation.getCurrentPosition(geolocationSuccess, geolocationError, positionOptions);
        }
        else
          document.getElementById("error").innerHTML += "Your browser doesn't support the Geolocation API";
      }
 
      window.onload = geolocateUser;



			

      	var map;
var directionsDisplay;
var directionsService;
var stepDisplay;
var markerArray = [];

function initialize() {
  // Instantiate a directions service.
  directionsService = new google.maps.DirectionsService();

  // Create a map and center it on San Francisco.
  var sf = new google.maps.LatLng(37.774391, -122.417859);
  var mapOptions = {
    zoom: 13,
    center: sf
  }
  map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);

  // Create a renderer for directions and bind it to the map.
  var rendererOptions = {
    map: map
  }
  directionsDisplay = new google.maps.DirectionsRenderer(rendererOptions)

  // Instantiate an info window to hold step text.
  stepDisplay = new google.maps.InfoWindow();
}

function calcRoute() {

  // First, remove any existing markers from the map.
  for (var i = 0; i < markerArray.length; i++) {
    markerArray[i].setMap(null);
  }

  // Now, clear the array itself.
  markerArray = [];

  // Retrieve the start and end locations and create
  // a DirectionsRequest using WALKING directions.
  var start = userLatLng;
  alert(start);
  var end = document.getElementById('end').value;
  var request = {
      origin: start,
      destination: end,
      travelMode: google.maps.TravelMode.WALKING
  };

  // Route the directions and pass the response to a
  // function to create markers for each step.
  directionsService.route(request, function(response, status) {
    if (status == google.maps.DirectionsStatus.OK) {
      var warnings = document.getElementById('warnings_panel');
      warnings.innerHTML = '<b>' + response.routes[0].warnings + '</b>';
      directionsDisplay.setDirections(response);
      showSteps(response);
    }
  });
}

function showSteps(directionResult) {
  // For each step, place a marker, and add the text to the marker's
  // info window. Also attach the marker to an array so we
  // can keep track of it and remove it when calculating new
  // routes.
  var myRoute = directionResult.routes[0].legs[0];

  for (var i = 0; i < myRoute.steps.length; i++) {
    var marker = new google.maps.Marker({
      position: myRoute.steps[i].start_location,
      map: map
    });
    attachInstructionText(marker, myRoute.steps[i].instructions);
    markerArray[i] = marker;
  }
}

function attachInstructionText(marker, text) {
  google.maps.event.addListener(marker, 'click', function() {
    // Open an info window when the marker is clicked on,
    // containing the text of the step.
    stepDisplay.setContent(text);
    stepDisplay.open(map, marker);
  });
}

google.maps.event.addDomListener(window, 'load', initialize);





		 </script>
		 <script>
			$(function() {
				function log( message ) {
					$( "<div>" ).text( message ).prependTo( "#log" );
					$( "#log" ).scrollTop( 0 );
				}

				$( "#destination" ).autocomplete({
					source: function( request, response ) {
						$.ajax({
							url: "http://gd.geobytes.com/AutoCompleteCity",
							dataType: "jsonp",
							data: {
							q: request.term
							},
							success: function( data ) {
							response( data );
							}
						});
					},
					minLength: 3,
					select: function( event, ui ) {
						log( ui.item ?
						"Selected: " + ui.item.label :
						"Nothing selected, input was " + this.value);
					},
					open: function() {
						$( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
					},
					close: function() {
						$( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );
					}
				});
			});
		</script>
		
		<script>
			new gnMenu( document.getElementById( 'gn-menu' ) );
		</script>
		<script>
			//if select menu show submenu 
	$('ul.gn-menu li').mouseover(function() {
		
   
   if($('ul.gn-menu li').children('ul.gn-submenu')){
        $('ul.gn-menu li').find('ul.gn-submenu').show();
   // alert("has");
}
});
</script>
	</body>
</html>